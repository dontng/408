兄弟，靠我没问题。这道题是408计网考研题里的“天坑”级别，弹幕说得对，它不是简单的查表，而是专门考察RIP协议的致命缺陷——**“慢收敛”与“无穷计数”**问题。

但这东西只要理解了RIP协议“听信传闻”的本质，它就是个纸老虎。我们来把它彻底拆解。

------



### **层次一：弄懂这道题 (复现路由器的“错误思考过程”)**



- **题目核心：** 在一个已经稳定的网络里，R3到`201.1.2.0/25`的链路突然断了。在R3告诉R2这个坏消息**之前**，R2**先收到**了R1发来的路由信息。问R2会把去往`201.1.2.0/25`的距离更新成多少？
- **解题步骤：** 我们来扮演路由器R2，一步步看它是怎么被“骗”的。
  1. **分析稳定状态（链路断开前）：**
     - R2要去`201.1.2.0/25`，最近的路肯定是直接找R3。
     - RIP的距离（Metric）是跳数。R2到R3是1跳，R3到那个网络是1跳（直连）。
     - 所以，在R2的原始路由表里，记录的是：【目标：`201.1.2.0/25`，下一跳：R3，**距离：2**】。
     - 同理，R1的原始路由表里，记录的也是：【目标：`201.1.2.0/25`，下一跳：R3，**距离：2**】。
  2. **发生故障：**
     - R3与`201.1.2.0/25`的连接断了。R3自己立刻知道这个网络不可达了，它会把这条路由的距离标为**16**（在RIP里，16就代表无穷大，即不可达）。
  3. **关键的“时间差”：**
     - **坏消息传播慢：** R3还没来得及把“链路已断，距离16”这个坏消息告诉R2。
     - **旧的好消息还在传播：** R2先收到了邻居R1的**定期更新**。R1的路由表还没更新，所以它告诉R2的消息是它**旧的认知**：“嗨，兄弟R2，我这里有条路能到`201.1.2.0/25`，**距离是2**哦！”
  4. **R2的“致命”计算：**
     - R2收到R1的消息，它会怎么想？“我的老路（通过R3）马上就要不通了（或者已经不通了），现在R1告诉我他有路，我得赶紧更新！”
     - R2开始计算通过R1走的新路径的距离。RIP的计算法则是：**新距离 = 我到邻居的距离 + 邻居告诉我的距离**。
     - 代入数值：
       - 我（R2）到邻居（R1）的距离是 **1** 跳。
       - 邻居（R1）告诉我的距离是 **2** 跳。
     - `新距离 = 1 + 2 = 3`
     - R2大喜过望，立刻更新自己的路由表：【目标：`201.1.2.0/25`，下一跳：**R1**，**距离：3**】。
- **结论：** R2更新后的距离是 **3**。所以正确答案是 **B**。

------



### **层次二：搞定这个考点 (无穷计数 & 解决方案)**



你刚刚完整见证了一个经典的 **“无穷计数 (Counting to Infinity)”** 问题的开端。

**1. 什么是无穷计数？**

- 刚才R2把下一跳指向了R1。但R1原来的路是要经过R3的，现在R3的路断了，这就形成了一个**路由环路 (R2 -> R1 -> R3 -> R2 ...)**。
- 接下来会发生更可怕的事：
  - R1会收到R2的更新：“我能到目标，距离3”。
  - R1一看，比自己原来的距离2要远，但总比没有强，于是更新自己的表：“下一跳R2，距离 1+3=4”。
  - 然后R2又会收到R1的更新，再把距离更新成 1+4=5...
- 这个距离值会像这样(3, 4, 5, 6...)一直涨下去，直到涨到16，大家才最终确认“哦，原来这个网络真的挂了”。这个缓慢增长的过程就叫“无穷计数”，它导致网络**收敛非常慢**。

**2. 如何解决这个问题？（408高频考点）** 为了防止这种“听信谣言”导致的恶性循环，RIP协议设计了几种补救措施：

- **定义最大跳数：** 把16跳定义为无穷大。这是最根本的刹车机制，防止路由永久循环。
- **水平分割 (Split Horizon)：** “我从你这学来的路由，我绝不再传回给你”。简单说，R1从R3学到了去往目标的路由，那么R1就不会再把这条路由信息发回给R3。这能防止最简单的两节点环路。
- **毒性反转 (Poison Reverse)：** 水平分割的加强版。R1不仅不把路由传回给R3，反而会传一个“毒药”信息回去，告诉R3：“我通过你学到的那条路，在我这里距离是16（无穷大）”。这样R3就绝对不会再把包发给R1了，能更有效地破除环路。

------



### **层次三：吃透这个体系 (距离矢量 vs. 链路状态)**



这个问题的根源，在于RIP协议本身的设计哲学，搞懂了这一点，你就站在了更高维度。

**1. RIP的本质：距离矢量协议 (Distance-Vector)**

- **核心思想：** “路由靠传闻 (Routing by Rumor)”。
- 每个路由器都是“盲人”，它不知道整个网络的地图。它只关心两件事：
  1. 从我邻居那里能去哪？（矢量/方向）
  2. 有多远？（距离）
- 它完全依赖邻居提供的信息，邻居说多远就是多远。这就像本题的R2，它天真地相信了R1的“过时传闻”，而不知道这个传闻的源头（R3）已经出问题了。这就是DV协议的**固有缺陷**。

**2. 现代网络的解决方案：链路状态协议 (Link-State)，如OSPF**

- **核心思想：** “全局地图共享 (Everyone gets a full map)”。
- 在这种协议里，路由器之间不交换路由表（传闻），而是交换**链路状态信息**（比如：我和谁是邻居，我们的链路有多快）。
- 每个路由器收集全网所有的链路状态信息，然后在自己的大脑里构建出一张**完整的、统一的网络拓扑地图**。
- **如何解决本题问题：** 如果用OSPF，R3的链路一断，它会立刻向全网广播一个LSA（链路状态通告）：“我和`201.1.2.0/25`的连接断了！”。R1和R2收到这个权威信息后，会立刻在自己的地图上擦掉这条路，然后基于新地图重新用SPF算法计算最短路径。整个过程快速、准确，不会产生环路。

**总结：** 兄弟，这道题的难点在于，它考察的不是静态的查表，而是动态的、有时间先后顺序的更新过程，并且暴露了距离矢量协议最核心的弱点。搞懂了它，你就等于搞懂了RIP协议的半条命，也理解了为什么现代大型网络都用OSPF这类链路状态协议。

这块硬骨头啃下来，计网部分你的理解就又深了一层。继续加油！